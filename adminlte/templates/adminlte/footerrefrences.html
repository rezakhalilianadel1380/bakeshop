{% load static %}
<script src="{% static 'adminlte/bower_components/jquery/dist/jquery.min.js' %}"></script>
<script src="{% static 'adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
<script  type="text/javascript" src="{% static 'adminlte/dist/js/adminlte.min.js' %}"></script>
<!-- Bootstrap 3.3.7 -->
<!-- FastClick -->
<script src="{% static 'adminlte/bower_components/fastclick/lib/fastclick.js' %}"></script>
<!-- AdminLTE App -->
<!-- Sparkline -->
<script src="{% static 'adminlte/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js' %}"></script>
<!-- jvectormap  -->
<script src="{% static 'adminlte/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
<script src="{% static 'adminlte/plugins/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>
<!-- SlimScroll -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.6.0/bootstrap-tagsinput.min.js"></script>
<script src="{% static 'adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
<!-- ChartJS -->
<script src="{% static 'adminlte/plugins/iCheck/icheck.min.js' %}"></script>
<script src="{% static 'adminlte/plugins/iCheck/icheck.js' %}"></script>
<script src="{% static 'adminlte/dist/js/demo.js' %}"></script>
<script src="{% static 'adminlte/dist/js/pages/dashboard2.js' %}"></script>
<script src="{% static 'adminlte/bower_components/select2/dist/js/select2.full.min.js' %}"></script>
<script>
  $(function () {
    //Initialize Select2 Elements
    $('.select2').select2()
  })
</script>
<!-- confirm delete product  adminlte -->
<script>
  $('#modal-danger').on('show.bs.modal', function (event) {
    var myVal = $(event.relatedTarget).data('val');
    $(this).find("#pid").attr("href",myVal)
  }); 

</script>
<!-- /confirm delete product  adminlte -->
<script>
    function a(){
        alert('sdf');
        }

    var labels=[];
    var datas=[];
        $.ajax({
            url:'/adminlte/chartjs',
            type:'GET',
            success:function(response){
                lables=response.lables
                datas=response.data
                chart()
            },
        });
        
  function chart(){
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels:lables,
            datasets: [{
                label: 'تعداد',
                data:datas,
                backgroundColor: [
                    'rgba(255, 99, 132)',
                    'rgba(54, 162, 235)',
                    'rgba(255, 206, 86)',
                    'rgba(75, 192, 192)',
                    'rgba(153, 102, 255)',
                    'rgba(255, 159, 64)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
  }
</script>
<script>
  function category_add(){
      $.ajax({
          url:'/adminlte/add_category',
          headers: {'X-CSRFToken': csrftoken},
          type:'POST',
          data:{
              "name":$('#categoryname').val(),
              "title":$('#categorytitle').val(),
          },
          success:function(rsp){
            $('#id_category').append('<option value='+rsp.id+' selected>'+rsp.title+'</option>');
            $('#categroy_add_button').click();
            $('input[name="category_name"]').val("");
            $('input[name="title_category"]').val("");
            
          },
      });
  }
  function turn(){
    var heart_icon=document.getElementById('shut_ico');
    if (heart_icon.classList.contains('text-danger')) {
        heart_icon.classList.remove('text-danger');
        heart_icon.classList.add('text-success');
        $.ajax({
          url:'/adminlte/api/v1/switch',
          headers: {'X-CSRFToken': csrftoken},
          type:'POST',
          data:{
              "is_on":1,
          },
          success:function(rsp){
            showAndDismissAlert('success','سایت بازه')
          },
      });
    } 
    else {
        heart_icon.classList.remove('text-success');
        heart_icon.classList.add('text-danger');
        $.ajax({
          url:'/adminlte/api/v1/switch',
          headers: {'X-CSRFToken': csrftoken},
          type:'POST',
          data:{
              "is_on":0,
          },
          success:function(rsp){
            showAndDismissAlert('success','سایت بستست')
          },
      });
    }

   
  }
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
     }
      return cookieValue;
      }
      const csrftoken = getCookie('csrftoken');
    function showAndDismissAlert(type, message) {
            var htmlAlert = '<div class="alert alert-' + type + '"  style="height:70px">'+
                "<i class='bi bi-lightbulb-fill' style='color:yellow'></i> "
                + '<span> ' +message +' </span>'+ 
                
                '</div>';

            // Prepend so that alert is on top, could also append if we want new alerts to show below instead of on top.
            $(".alert-messages").prepend(htmlAlert);

            // Since we are prepending, take the first alert and tell it to fade in and then fade out.
            // Note: if we were appending, then should use last() instead of first()
            $(".alert-messages .alert").first().hide().fadeIn(200).delay(2000).fadeOut(1000, function () { $(this).remove(); });
        }
  </script>

<script>
    $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
          checkboxClass: 'icheckbox_flat-green',
          radioClass   : 'iradio_flat-green'
        })

    $(".checkbox-toggle").click(function () {
      var clicks = $(this).data('clicks');
      if (clicks) {
        //Uncheck all checkboxes
        $(".mailbox-messages input[type='checkbox']").iCheck("uncheck");
        $(".fa", this).removeClass("fa-check-square-o").addClass('fa-square-o');
      } else {
        //Check all checkboxes
        $(".mailbox-messages input[type='checkbox']").iCheck("check");
        $(".fa", this).removeClass("fa-square-o").addClass('fa-check-square-o');
      }
      console.log($(this));
      $(this).data("clicks", !clicks);
    });

      $(".RD").click(function() {
            checkboxes=$(".mailbox-messages input[type='checkbox']:checked");
            if (checkboxes.length == 0){
              showAndDismissAlert('red','هیچ ایتمی انتخاب نشده است ')
            }
            else{
              values=[];
              for(i=0;i<checkboxes.length;i++){
                values.push(checkboxes[i].value);
              }
              $.ajax({
                url:'/adminlte/api/v1/delete_item',
                headers: {'X-CSRFToken': csrftoken},
                type:'POST',
                data:{
                    'items':values,
                },
                success:function(rsp){
                  $(".mailbox-messages input[type='checkbox']").iCheck("uncheck");
                  location.reload(); 
                },
            });
              
            }
      });

    
</script>
